### Аутентификация и авторизация в кластере Kubernetes:
Каждый запрос перед попаданием в etcd проходит 3 стадии для определения пользователя и прав в кластере:
1. Аутентификация - кто мы?
2. Авторизация - что ты можешь делать?
3. Admission Control - могут изменить или отклонить запрос
    1. Admission Controller перехватывает запрос в k8s Api перед записью в etcd


# Авторизация в k8s:
1. Node - это модуль, который раздаёт разрешения kubelet ходить в Api и читать всё в поде на этой ноде.
    1. Может записывать статусы нод, подов, события
    2. Может изменять вещи, относящиеся только к нему
2. ABAC - это доступ базирующийся на аттрибутах (устаревший с приходом RBAC)
3. RBAC - это актуальная версия авторизации
4. Webhook - http вызов.
    1. k8s запрашивает сторонний рест-сервис для определения польз-ких привилегии


# RBAC - Role Based Access Control:
k8s версия 1.6 и выше. 1.8 и выше - стабильная версия 
Что бы вкл RBAC, нужно запустить Api сервер с параметром --auth-mode=rbac

Состоит из:
1. subjects (субъекты)
2. resources (ресурсы)
3. verbs (глаголы)

# Role и ClusterRole:
Role действует в пределах -n
ClusterRole действует в пределах всего кластера

1. Соединяет ресурсы и глаголы
2. Представляет собой набор разрешений

# RoleBinding и ClusterRoleBinding:
RoleBinding действует в пределах -n
ClusterRoleBinding действует в пределах всего кластера

1. RoleBinding соединяет роли с субъектами (пользователями)

# Commands:
1. `kubectl get clusterroles -A` - view all cluster roles
2. `kubectl apply -f pod-reader-binding-group.yaml` - связать группу developer с ролью pod-reader (с правами на просмотр)
3. `kubectl get rolebinding -A` - посмотреть все rb
4. ### `kubectl auth can-i get pods -n default --as user1` - Проверить доступ для пользователя внутри кластера