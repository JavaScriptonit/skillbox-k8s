https://go.skillbox.ru/education/course/devops-kubernetes/1e0b6708-8a5b-4d77-9e72-cda8c15c497e/videolesson

# 9.1 Введение в мониторинг. Prometheus

1. Самые популярные программы для мониторинга k8s кластеров:
    1. Prometheus
        1. Prometheus-метрики состоят из ключа:значения, которые можно фильтровать по (ядру/ip/и тд), например, `cpu_usage`
        2. Prometheus не создан для хранения такой информации как текст.
        3. Prometheus - это БД (ключ:значение)
    2. Victoria-metrics

## Типы метрик:
1. Counter(счётчик) - значения, которые увелич. с теч. времени
2. Gauge(шкала) - значения, которые увелич. с теч. времени или уменьшатсья 
3. Histogram(гистограмма) - хранит инфо об изменении некоторого параметра в теч опред промежутка
4. Summary(сводка результатов) - расширенная гистограмма - непрерывное развитие во времени


## Prometheus-архитектура:
1. Prometheus-server:
    1. Retrieaval worker (отвечает за получение метрик и направление их в TSDB)
    2. TSDB (база данных для хранения горячих данных (метрик), default до 15 дней)
    3. HTTP server (API для получения сохр данных с TSDB)
2. Alertmanager (служить для отправки alert и уведомлений):
    1. Pagerduty
    2. Email
    3. etc
3. Pushgateway (Prometheus может забрать метрики из Pushgateway при выполнении jobs/cron jobs):
    1. Short-lived jobs
4. Service discovery (механизм, который позволяет автоматически обнаруживать и мониторить цели (targets) для сбора метрик)
    Это особенно полезно в динамических окружениях, где цели могут появляться и исчезать автоматически, таких как контейнерные оркестраторы (например, Kubernetes, Docker Swarm) или облачные окружения.
    1. k8s
    2. file_sd
